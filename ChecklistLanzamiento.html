<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LanzamientoListo - Checklist para Autopublicación</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .fade-in {
            animation: fadeIn 0.3s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .task-item:hover .task-actions {
            opacity: 1;
        }
        
        .phase-header {
            transition: all 0.2s ease;
        }
        
        .phase-header:hover {
            background-color: rgba(59, 130, 246, 0.1);
        }
        
        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 10px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
        
        .tooltip {
            position: relative;
            display: inline-block;
        }
        
        .tooltip .tooltip-text {
            visibility: hidden;
            width: 200px;
            background-color: #333;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 5px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -100px;
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .tooltip:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen font-sans">
    <div class="container mx-auto px-4 py-8 max-w-4xl">
        <!-- Header -->
        <header class="mb-8 text-center">
            <h1 class="text-3xl md:text-4xl font-bold text-blue-600 mb-2">LanzamientoListo</h1>
            <p class="text-gray-600">Tu checklist personalizada para autopublicar cuentos infantiles y novelas</p>
        </header>

        <!-- Main Content -->
        <main id="app" class="bg-white rounded-lg shadow-md overflow-hidden">
            <!-- Initial Setup (shown when no project exists) -->
            <div id="setup-container" class="p-6 fade-in">
                <h2 class="text-2xl font-semibold text-gray-800 mb-6">Configura tu proyecto</h2>
                
                <div class="space-y-6">
                    <div>
                        <label class="block text-gray-700 font-medium mb-2" for="book-type">Tipo de Libro</label>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <button id="children-book" class="book-type-btn py-3 px-4 border-2 border-blue-100 rounded-lg text-left hover:border-blue-300 transition" data-value="Cuento Infantil">
                                <i class="fas fa-book-open text-blue-500 mr-2"></i>
                                <span class="font-medium">Cuento Infantil</span>
                                <p class="text-sm text-gray-500 mt-1">Libros ilustrados para niños con énfasis en imágenes y texto simple.</p>
                            </button>
                            <button id="novel-book" class="book-type-btn py-3 px-4 border-2 border-blue-100 rounded-lg text-left hover:border-blue-300 transition" data-value="Novela">
                                <i class="fas fa-book text-blue-500 mr-2"></i>
                                <span class="font-medium">Novela</span>
                                <p class="text-sm text-gray-500 mt-1">Obras de ficción o no ficción con texto continuo y menos imágenes.</p>
                            </button>
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-gray-700 font-medium mb-2" for="publish-method">Método de Publicación</label>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <button id="kdp-method" class="publish-method-btn py-3 px-4 border-2 border-blue-100 rounded-lg text-left hover:border-blue-300 transition" data-value="Amazon KDP">
                                <i class="fab fa-amazon text-blue-500 mr-2"></i>
                                <span class="font-medium">Amazon KDP</span>
                                <p class="text-sm text-gray-500 mt-1">Publicación digital e impresión bajo demanda con Amazon.</p>
                            </button>
                            <button id="printing-method" class="publish-method-btn py-3 px-4 border-2 border-blue-100 rounded-lg text-left hover:border-blue-300 transition" data-value="Imprenta">
                                <i class="fas fa-print text-blue-500 mr-2"></i>
                                <span class="font-medium">Imprenta</span>
                                <p class="text-sm text-gray-500 mt-1">Publicación tradicional con imprenta local o servicio de POD.</p>
                            </button>
                        </div>
                    </div>
                    
                    <div class="pt-4">
                        <button id="generate-checklist" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-lg transition flex items-center justify-center">
                            <i class="fas fa-magic mr-2"></i>
                            Generar Checklist Personalizada
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Checklist (shown when project exists) -->
            <div id="checklist-container" class="hidden">
                <!-- Project Info Header -->
                <div class="bg-blue-600 text-white p-4 flex flex-col md:flex-row justify-between items-start md:items-center">
                    <div class="mb-2 md:mb-0">
                        <h2 class="text-xl font-bold">Tu Checklist de Lanzamiento</h2>
                        <div class="flex items-center mt-1">
                            <span id="project-type-badge" class="inline-block bg-blue-500 text-xs px-2 py-1 rounded mr-2"></span>
                            <span id="publish-method-badge" class="inline-block bg-blue-500 text-xs px-2 py-1 rounded"></span>
                        </div>
                    </div>
                    
                    <div class="flex space-x-2">
                        <button id="new-project-btn" class="bg-white text-blue-600 hover:bg-blue-50 px-3 py-1 rounded text-sm font-medium transition">
                            <i class="fas fa-plus mr-1"></i> Nuevo Proyecto
                        </button>
                        <button id="export-btn" class="bg-white text-blue-600 hover:bg-blue-50 px-3 py-1 rounded text-sm font-medium transition">
                            <i class="fas fa-file-export mr-1"></i> Exportar
                        </button>
                        <button id="import-btn" class="bg-white text-blue-600 hover:bg-blue-50 px-3 py-1 rounded text-sm font-medium transition">
                            <i class="fas fa-file-import mr-1"></i> Importar
                        </button>
                        <input type="file" id="import-file" class="hidden" accept=".json">
                    </div>
                </div>
                
                <!-- Progress Bar -->
                <div class="bg-gray-100 px-4 py-2">
                    <div class="flex justify-between items-center mb-1">
                        <span class="text-sm font-medium text-gray-700">Progreso</span>
                        <span id="progress-percentage" class="text-sm font-medium text-gray-700">0%</span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-2.5">
                        <div id="progress-bar" class="bg-blue-600 h-2.5 rounded-full" style="width: 0%"></div>
                    </div>
                </div>
                
                <!-- Checklist Content -->
                <div id="checklist-content" class="p-4 max-h-[calc(100vh-220px)] overflow-y-auto custom-scrollbar">
                    <!-- Phases will be inserted here by JavaScript -->
                </div>
            </div>
        </main>
        
        <!-- Footer -->
        <footer class="mt-8 text-center text-gray-500 text-sm">
            <p>LanzamientoListo - Checklist para autopublicación de libros</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // DOM Elements
            const setupContainer = document.getElementById('setup-container');
            const checklistContainer = document.getElementById('checklist-container');
            const generateChecklistBtn = document.getElementById('generate-checklist');
            const newProjectBtn = document.getElementById('new-project-btn');
            const exportBtn = document.getElementById('export-btn');
            const importBtn = document.getElementById('import-btn');
            const importFileInput = document.getElementById('import-file');
            const progressPercentage = document.getElementById('progress-percentage');
            const progressBar = document.getElementById('progress-bar');
            const projectTypeBadge = document.getElementById('project-type-badge');
            const publishMethodBadge = document.getElementById('publish-method-badge');
            const checklistContent = document.getElementById('checklist-content');
            
            // Book type and publish method buttons
            const bookTypeBtns = document.querySelectorAll('.book-type-btn');
            const publishMethodBtns = document.querySelectorAll('.publish-method-btn');
            
            // Selected options
            let selectedBookType = null;
            let selectedPublishMethod = null;
            
            // Task data structure
            const taskTemplates = {
                "Cuento Infantil": {
                    "Amazon KDP": {
                        "Preparación del Manuscrito": [
                            { id: "ci-kdp-1", description: "Finalizar la escritura del manuscrito", help: "Asegúrate de que la historia está completa y revisada." },
                            { id: "ci-kdp-2", description: "Planificar la integración de texto e ilustraciones página por página", help: "Crea un storyboard o esquema de cómo se distribuirán texto e imágenes." },
                            { id: "ci-kdp-3", description: "Definir el estilo visual y el ambiente del libro", help: "Determina el estilo de ilustración, paleta de colores y tono visual." },
                            { id: "ci-kdp-4", description: "Realizar una ronda de autoedición/revisión", help: "Revisa el texto en busca de errores y coherencia narrativa." }
                        ],
                        "Ilustración y Diseño": [
                            { id: "ci-kdp-5", description: "Contratar o colaborar con un ilustrador (si aplica)", help: "Busca un profesional cuyo estilo coincida con tu visión." },
                            { id: "ci-kdp-6", description: "Recopilar y organizar los archivos de ilustración finales en alta resolución", help: "KDP requiere imágenes a 300 DPI en formato JPEG o TIFF." },
                            { id: "ci-kdp-7", description: "Asegurar la coherencia visual en todas las ilustraciones", help: "Revisa que todas las imágenes mantengan el mismo estilo y calidad." },
                            { id: "ci-kdp-8", description: "Diseñar una cubierta atractiva y profesional", help: "Para cuentos infantiles, la cubierta debe ser colorida y mostrar personajes principales." }
                        ],
                        "Formateo y Publicación": [
                            { id: "ci-kdp-9", description: "Maquetar el interior integrando texto e ilustraciones correctamente", help: "Usa herramientas como Adobe InDesign o contratar a un maquetador profesional." },
                            { id: "ci-kdp-10", description: "Preparar el archivo de la cubierta según especificaciones de KDP", help: "Calcula el lomo basado en el número de páginas y tipo de papel." },
                            { id: "ci-kdp-11", description: "Realizar una revisión final de pruebas de maquetación", help: "Imprime una copia de prueba para verificar que todo se ve bien." },
                            { id: "ci-kdp-12", description: "Subir los archivos a KDP y configurar los detalles del libro", help: "Completa todos los metadatos, categorías y precios cuidadosamente." }
                        ],
                        "Marketing y Legal": [
                            { id: "ci-kdp-13", description: "Registrar los derechos de autor", help: "Considera registrar tu obra en el organismo correspondiente de tu país." },
                            { id: "ci-kdp-14", description: "Obtener un ISBN (si no usas el gratuito de KDP)", help: "KDP proporciona ISBN gratis para sus plataformas, pero necesitarás uno propio para distribución amplia." },
                            { id: "ci-kdp-15", description: "Escribir una sinopsis atractiva para la descripción", help: "Destaca los puntos clave de tu historia de manera atractiva para padres y niños." },
                            { id: "ci-kdp-16", description: "Planificar una estrategia de lanzamiento", help: "Considera promociones, redes sociales y contactar reseñadores." }
                        ]
                    },
                    "Imprenta": {
                        "Preparación del Manuscrito": [
                            { id: "ci-imp-1", description: "Finalizar la escritura del manuscrito", help: "Asegúrate de que la historia está completa y revisada." },
                            { id: "ci-imp-2", description: "Planificar la integración de texto e ilustraciones página por página", help: "Crea un storyboard detallado para la imprenta." },
                            { id: "ci-imp-3", description: "Definir el estilo visual y el ambiente del libro", help: "Considera cómo se verán las ilustraciones en el papel elegido." },
                            { id: "ci-imp-4", description: "Realizar una ronda de autoedición/revisión", help: "Revisa el texto en busca de errores y coherencia narrativa." }
                        ],
                        "Ilustración y Diseño": [
                            { id: "ci-imp-5", description: "Contratar o colaborar con un ilustrador (si aplica)", help: "Asegúrate de que el ilustrador entiende los requisitos de impresión." },
                            { id: "ci-imp-6", description: "Preparar ilustraciones en alta resolución (CMYK, 300 DPI mínimo)", help: "Consulta con la imprenta los formatos y especificaciones exactas." },
                            { id: "ci-imp-7", description: "Asegurar la coherencia visual en todas las ilustraciones", help: "Revisa que todas las imágenes mantengan el mismo estilo y calidad." },
                            { id: "ci-imp-8", description: "Diseñar una cubierta profesional incluyendo lomo y contraportada", help: "Considera acabados especiales como barnices UV o relieves." }
                        ],
                        "Preparación para Impresión": [
                            { id: "ci-imp-9", description: "Seleccionar imprenta y obtener presupuestos", help: "Compara varias opciones y verifica su calidad con muestras." },
                            { id: "ci-imp-10", description: "Determinar tamaño de corte, tipo de papel y encuadernación", help: "Para cuentos infantiles, considera papel grueso y encuadernación resistente." },
                            { id: "ci-imp-11", description: "Maquetar el interior integrando texto e ilustraciones", help: "Asegúrate de incluir márgenes y medianiles adecuados." },
                            { id: "ci-imp-12", description: "Preparar archivos finales según especificaciones de la imprenta", help: "Incluye marcas de corte y sangrado si es necesario." }
                        ],
                        "Producción y Distribución": [
                            { id: "ci-imp-13", description: "Revisar y aprobar pruebas de impresión", help: "Pide pruebas físicas para evaluar colores y calidad." },
                            { id: "ci-imp-14", description: "Registrar los derechos de autor", help: "Considera registrar tu obra en el organismo correspondiente de tu país." },
                            { id: "ci-imp-15", description: "Obtener ISBN (necesario para distribución en librerías)", help: "Adquiere tu propio ISBN para mantener control sobre la edición." },
                            { id: "ci-imp-16", description: "Planificar almacenamiento y distribución", help: "Considera costos de almacén y envíos si vas a vender directamente." }
                        ]
                    }
                },
                "Novela": {
                    "Amazon KDP": {
                        "Preparación del Manuscrito": [
                            { id: "nov-kdp-1", description: "Finalizar la escritura del manuscrito", help: "Completa todos los capítulos y revisa la estructura general." },
                            { id: "nov-kdp-2", description: "Realizar una ronda de autoedición/revisión", help: "Revisa coherencia, ritmo y desarrollo de personajes." },
                            { id: "nov-kdp-3", description: "Contratar edición profesional (estructura y estilo)", help: "Un editor profesional puede mejorar significativamente tu obra." },
                            { id: "nov-kdp-4", description: "Contratar corrección de pruebas (gramática y ortografía)", help: "Errores ortográficos pueden restar credibilidad a tu trabajo." }
                        ],
                        "Diseño y Formato": [
                            { id: "nov-kdp-5", description: "Diseñar una cubierta profesional y atractiva", help: "La cubierta debe reflejar el género y llamar la atención en miniaturas." },
                            { id: "nov-kdp-6", description: "Formatear el manuscrito para eBook (MOBI/EPUB)", help: "Usa herramientas como Kindle Create o contrata a un formateador." },
                            { id: "nov-kdp-7", description: "Formatear el manuscrito para versión impresa (PDF)", help: "Asegúrate de que los márgenes y fuentes sean adecuados para impresión." },
                            { id: "nov-kdp-8", description: "Preparar el archivo de la cubierta según especificaciones KDP", help: "Calcula el lomo basado en páginas y tipo de papel." }
                        ],
                        "Publicación": [
                            { id: "nov-kdp-9", description: "Crear o acceder a cuenta de Amazon KDP", help: "Necesitarás una cuenta de Amazon para publicar." },
                            { id: "nov-kdp-10", description: "Subir archivos del manuscrito y cubierta", help: "Sigue cuidadosamente las instrucciones de KDP." },
                            { id: "nov-kdp-11", description: "Configurar detalles del libro (precio, categorías, palabras clave)", help: "Investiga palabras clave relevantes para tu género." },
                            { id: "nov-kdp-12", description: "Decidir sobre inscripción en KDP Select (exclusividad)", help: "KDP Select ofrece ventajas pero requiere exclusividad por 90 días." }
                        ],
                        "Marketing y Legal": [
                            { id: "nov-kdp-13", description: "Registrar los derechos de autor", help: "Considera registrar tu obra en el organismo correspondiente de tu país." },
                            { id: "nov-kdp-14", description: "Obtener ISBN (si no usas el gratuito de KDP)", help: "KDP proporciona ISBN gratis para sus plataformas." },
                            { id: "nov-kdp-15", description: "Escribir una sinopsis atractiva para la descripción", help: "Destaca los puntos clave de tu historia sin spoilers." },
                            { id: "nov-kdp-16", description: "Planificar una estrategia de lanzamiento", help: "Considera promociones, redes sociales y contactar reseñadores." }
                        ]
                    },
                    "Imprenta": {
                        "Preparación del Manuscrito": [
                            { id: "nov-imp-1", description: "Finalizar la escritura del manuscrito", help: "Completa todos los capítulos y revisa la estructura general." },
                            { id: "nov-imp-2", description: "Realizar una ronda de autoedición/revisión", help: "Revisa coherencia, ritmo y desarrollo de personajes." },
                            { id: "nov-imp-3", description: "Contratar edición profesional (estructura y estilo)", help: "Un editor profesional puede mejorar significativamente tu obra." },
                            { id: "nov-imp-4", description: "Contratar corrección de pruebas (gramática y ortografía)", help: "Errores ortográficos pueden restar credibilidad a tu trabajo." }
                        ],
                        "Diseño y Formato": [
                            { id: "nov-imp-5", description: "Diseñar una cubierta profesional incluyendo lomo y contraportada", help: "La contraportada debe incluir sinopsis y biografía del autor." },
                            { id: "nov-imp-6", description: "Formatear el interior profesionalmente para imprenta", help: "Incluye márgenes adecuados, medianil y considera tipografía legible." },
                            { id: "nov-imp-7", description: "Seleccionar imprenta y obtener presupuestos", help: "Compara varias opciones y verifica su calidad con muestras." },
                            { id: "nov-imp-8", description: "Determinar tamaño de corte, tipo de papel y encuadernación", help: "Para novelas, considera papel de buen gramaje pero no demasiado grueso." }
                        ],
                        "Producción": [
                            { id: "nov-imp-9", description: "Preparar archivos finales según especificaciones de la imprenta", help: "Asegúrate de incluir marcas de corte y sangrado si es necesario." },
                            { id: "nov-imp-10", description: "Revisar y aprobar pruebas de impresión (galeradas)", help: "Pide pruebas físicas para evaluar calidad antes de la tirada completa." },
                            { id: "nov-imp-11", description: "Firmar contrato y acordar plazos de entrega", help: "Asegúrate de entender los términos de pago y responsabilidades." },
                            { id: "nov-imp-12", description: "Coordinar envío de archivos finales a la imprenta", help: "Verifica que todos los archivos sean los correctos y finales." }
                        ],
                        "Distribución y Legal": [
                            { id: "nov-imp-13", description: "Registrar los derechos de autor", help: "Considera registrar tu obra en el organismo correspondiente de tu país." },
                            { id: "nov-imp-14", description: "Obtener ISBN (necesario para distribución en librerías)", help: "Adquiere tu propio ISBN para mantener control sobre la edición." },
                            { id: "nov-imp-15", description: "Planificar almacenamiento y distribución", help: "Considera costos de almacén y envíos si vas a vender directamente." },
                            { id: "nov-imp-16", description: "Desarrollar estrategia de marketing y promoción", help: "Planifica presentaciones, firmas de libros y presencia en redes." }
                        ]
                    }
                }
            };
            
            // Current project data
            let currentProject = {
                projectType: null,
                publishMethod: null,
                checklist: []
            };
            
            // Initialize the app
            function initApp() {
                // Load saved project from localStorage if exists
                const savedProject = localStorage.getItem('lanzamientoListoProject');
                
                if (savedProject) {
                    currentProject = JSON.parse(savedProject);
                    showChecklist();
                } else {
                    showSetup();
                }
                
                // Set up event listeners for book type selection
                bookTypeBtns.forEach(btn => {
                    btn.addEventListener('click', function() {
                        // Remove active class from all buttons
                        bookTypeBtns.forEach(b => b.classList.remove('border-blue-500', 'bg-blue-50'));
                        
                        // Add active class to clicked button
                        this.classList.add('border-blue-500', 'bg-blue-50');
                        selectedBookType = this.getAttribute('data-value');
                    });
                });
                
                // Set up event listeners for publish method selection
                publishMethodBtns.forEach(btn => {
                    btn.addEventListener('click', function() {
                        // Remove active class from all buttons
                        publishMethodBtns.forEach(b => b.classList.remove('border-blue-500', 'bg-blue-50'));
                        
                        // Add active class to clicked button
                        this.classList.add('border-blue-500', 'bg-blue-50');
                        selectedPublishMethod = this.getAttribute('data-value');
                    });
                });
                
                // Generate checklist button
                generateChecklistBtn.addEventListener('click', generateChecklist);
                
                // New project button
                newProjectBtn.addEventListener('click', function() {
                    if (confirm('¿Estás seguro de que quieres comenzar un nuevo proyecto? Se perderá el progreso actual.')) {
                        localStorage.removeItem('lanzamientoListoProject');
                        currentProject = {
                            projectType: null,
                            publishMethod: null,
                            checklist: []
                        };
                        showSetup();
                    }
                });
                
                // Export button
                exportBtn.addEventListener('click', exportProject);
                
                // Import button
                importBtn.addEventListener('click', function() {
                    importFileInput.click();
                });
                
                importFileInput.addEventListener('change', importProject);
            }
            
            // Show setup screen
            function showSetup() {
                setupContainer.classList.remove('hidden');
                checklistContainer.classList.add('hidden');
                
                // Reset selections
                selectedBookType = null;
                selectedPublishMethod = null;
                bookTypeBtns.forEach(b => b.classList.remove('border-blue-500', 'bg-blue-50'));
                publishMethodBtns.forEach(b => b.classList.remove('border-blue-500', 'bg-blue-50'));
            }
            
            // Show checklist screen
            function showChecklist() {
                setupContainer.classList.add('hidden');
                checklistContainer.classList.remove('hidden');
                
                // Update project info badges
                projectTypeBadge.textContent = currentProject.projectType;
                publishMethodBadge.textContent = currentProject.publishMethod;
                
                // Render checklist
                renderChecklist();
                
                // Update progress
                updateProgress();
            }
            
            // Generate checklist based on selections
            function generateChecklist() {
                if (!selectedBookType || !selectedPublishMethod) {
                    alert('Por favor selecciona tanto el tipo de libro como el método de publicación.');
                    return;
                }
                
                // Create new project
                currentProject = {
                    projectType: selectedBookType,
                    publishMethod: selectedPublishMethod,
                    checklist: []
                };
                
                // Get tasks from template
                const phases = taskTemplates[selectedBookType][selectedPublishMethod];
                
                // Add all tasks to checklist
                for (const phase in phases) {
                    phases[phase].forEach(task => {
                        currentProject.checklist.push({
                            id: task.id,
                            description: task.description,
                            help: task.help,
                            phase: phase,
                            isCompleted: false
                        });
                    });
                }
                
                // Save to localStorage
                localStorage.setItem('lanzamientoListoProject', JSON.stringify(currentProject));
                
                // Show checklist
                showChecklist();
            }
            
            // Render checklist
            function renderChecklist() {
                // Clear current content
                checklistContent.innerHTML = '';
                
                // Group tasks by phase
                const tasksByPhase = {};
                currentProject.checklist.forEach(task => {
                    if (!tasksByPhase[task.phase]) {
                        tasksByPhase[task.phase] = [];
                    }
                    tasksByPhase[task.phase].push(task);
                });
                
                // Create phase sections
                for (const phase in tasksByPhase) {
                    const phaseSection = document.createElement('div');
                    phaseSection.className = 'mb-6';
                    
                    // Phase header
                    const phaseHeader = document.createElement('div');
                    phaseHeader.className = 'flex items-center justify-between cursor-pointer bg-gray-100 px-4 py-3 rounded-lg phase-header';
                    phaseHeader.innerHTML = `
                        <h3 class="font-semibold text-gray-800 flex items-center">
                            <i class="fas fa-folder-open text-blue-500 mr-2"></i>
                            ${phase}
                        </h3>
                        <span class="text-sm text-gray-600">${getCompletedCount(tasksByPhase[phase])}/${tasksByPhase[phase].length}</span>
                    `;
                    
                    // Phase content (initially shown)
                    const phaseContent = document.createElement('div');
                    phaseContent.className = 'mt-2 pl-2';
                    
                    // Add tasks
                    tasksByPhase[phase].forEach(task => {
                        const taskItem = document.createElement('div');
                        taskItem.className = 'flex items-start py-3 px-2 border-b border-gray-100 task-item';
                        taskItem.innerHTML = `
                            <div class="flex items-start flex-1">
                                <input type="checkbox" id="${task.id}" ${task.isCompleted ? 'checked' : ''} 
                                    class="mt-1 h-5 w-5 text-blue-600 rounded border-gray-300 focus:ring-blue-500 task-checkbox">
                                <div class="ml-3 flex-1">
                                    <label for="${task.id}" class="block text-gray-700 ${task.isCompleted ? 'line-through text-gray-400' : ''}">
                                        ${task.description}
                                    </label>
                                    ${task.help ? `
                                    <div class="tooltip mt-1 inline-block">
                                        <i class="fas fa-info-circle text-blue-400 text-sm"></i>
                                        <span class="tooltip-text">${task.help}</span>
                                    </div>
                                    ` : ''}
                                </div>
                            </div>
                        `;
                        
                        // Add event listener for checkbox
                        const checkbox = taskItem.querySelector('.task-checkbox');
                        checkbox.addEventListener('change', function() {
                            const taskIndex = currentProject.checklist.findIndex(t => t.id === task.id);
                            if (taskIndex !== -1) {
                                currentProject.checklist[taskIndex].isCompleted = this.checked;
                                localStorage.setItem('lanzamientoListoProject', JSON.stringify(currentProject));
                                updateProgress();
                                
                                // Update task appearance
                                const label = taskItem.querySelector('label');
                                if (this.checked) {
                                    label.classList.add('line-through', 'text-gray-400');
                                } else {
                                    label.classList.remove('line-through', 'text-gray-400');
                                }
                                
                                // Update phase count
                                phaseHeader.querySelector('span').textContent = `${getCompletedCount(tasksByPhase[phase])}/${tasksByPhase[phase].length}`;
                            }
                        });
                        
                        phaseContent.appendChild(taskItem);
                    });
                    
                    phaseSection.appendChild(phaseHeader);
                    phaseSection.appendChild(phaseContent);
                    checklistContent.appendChild(phaseSection);
                }
            }
            
            // Get completed task count for a phase
            function getCompletedCount(tasks) {
                return tasks.filter(t => t.isCompleted).length;
            }
            
            // Update progress bar and percentage
            function updateProgress() {
                if (currentProject.checklist.length === 0) return;
                
                const completedCount = currentProject.checklist.filter(t => t.isCompleted).length;
                const totalCount = currentProject.checklist.length;
                const percentage = Math.round((completedCount / totalCount) * 100);
                
                progressPercentage.textContent = `${percentage}%`;
                progressBar.style.width = `${percentage}%`;
            }
            
            // Export project to JSON file
            function exportProject() {
                const dataStr = JSON.stringify(currentProject, null, 2);
                const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
                
                const exportFileDefaultName = `lanzamientolisto_${currentProject.projectType.replace(' ', '_')}_${currentProject.publishMethod.replace(' ', '_')}_${new Date().toISOString().slice(0, 10)}.json`;
                
                const linkElement = document.createElement('a');
                linkElement.setAttribute('href', dataUri);
                linkElement.setAttribute('download', exportFileDefaultName);
                linkElement.click();
            }
            
            // Import project from JSON file
            function importProject(event) {
                const file = event.target.files[0];
                if (!file) return;
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    try {
                        const importedData = JSON.parse(e.target.result);
                        
                        // Validate imported data structure
                        if (!importedData.projectType || !importedData.publishMethod || !importedData.checklist) {
                            throw new Error('El archivo no contiene un proyecto válido de LanzamientoListo.');
                        }
                        
                        // Check if the checklist has the required fields
                        const isValidChecklist = importedData.checklist.every(task => 
                            task.id && task.description !== undefined && task.isCompleted !== undefined
                        );
                        
                        if (!isValidChecklist) {
                            throw new Error('La checklist en el archivo no tiene la estructura correcta.');
                        }
                        
                        // Confirm import with user
                        if (confirm(`¿Importar proyecto de ${importedData.projectType} (${importedData.publishMethod})? Esto sobrescribirá tu proyecto actual.`)) {
                            currentProject = importedData;
                            localStorage.setItem('lanzamientoListoProject', JSON.stringify(currentProject));
                            showChecklist();
                        }
                    } catch (error) {
                        alert(`Error al importar el archivo: ${error.message}`);
                        console.error(error);
                    }
                    
                    // Reset file input
                    event.target.value = '';
                };
                
                reader.readAsText(file);
            }
            
            // Initialize the app
            initApp();
        });
    </script>
</body>
</html>